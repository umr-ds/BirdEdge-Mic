<!DOCTYPE html>
<html>

<head>
    <title>Bird@Edge Mic</title>
    <script type="text/javascript" src="birdedge.js"></script>
    <link rel="stylesheet" type="text/css" href="birdedge.css">
</head>

<body>
    <div id="main">
        <div id="content">
            <form method="post" action="restart">
                <h1><span id="hostname">birdclient-0000</span> <button type="submit" id="restart">Restart Device</button></h1>
            </form>
            <h5 id="message"></h5>

            <h2>Bird@Edge Mic</h2>
            <p>This device is part of a distributed Bird@Edge installation. Multiple <i>Bird@Edge Mics</i> stream audio
                to a respective <i>Bird@EdgeStation</i>, which runs a bird song classification and uploads its data to
                the cloud. </p>
            <p>The WebUI you are accessing right now can be used to check the microphone and listen to the stream recorded by the Mic.</p>

            <h2>Stream</h2>
            <audio controls="controls" preload="none">
                <source src="stream.wav" type="audio/wav">
            </audio>

            <form action="/wifi" method="post" target="_self"> 
            <h2>WiFi Configuration <button class="submit">Save</button></h2>
            <p>A <i>Bird@Edge Mic</i> creates an Access Point to allow for debugging and configuration. To connect to a WiFi, custom credentials can be configured.</p>

                <label for="wifi_ssid">WiFi SSID:</label>
                <input type="text" id="wifi_ssid" name="wifi_ssid">
                <label for="wifi_pass">Password:</label>
                <input type="password" id="wifi_pass" name="wifi_pass">
            </form>

            <h2>System Status <button onclick="loadStatus()">Refresh</button></h2>
            <table>
            <tr>
                <th>Uptime (s)</th>
                <th>Memory (B)</th> 
                <th>Battery (V)</th> 
                <th>Streaming</th> 
            </tr>
            <tr>
                <td id="uptime"></td> 
                <td id="heap"></td>
                <td id="battery"></td>
                <td id="streaming"></td>
            </tr>
            </table>
            <h2>Network Status</h2>
            <table>
            <tr>
                <th>IP</th>
                <th>WiFi RSSI (dBm)</th>
                <th>Ping (ms)</th>
            </tr>
            <tr>
                <td id="ip"></td>
                <td id="wifi_rssi"></td>
                <td id="ping"></td>
            </tr>
            </table>
        </div>
    </div>

    <footer>
        <p><a href="https://github.com/umr-ds/BirdEdge/tree/main/BirdEdge-Client" target="_blank">Bird@Edge Mic</a>
            &copy;
            <a href="https://ds.mathematik.uni-marburg.de/"  target="_blank">Distributed Systems Group</a>,
            University of Marburg</p>
    </footer>
</body>

</html>
